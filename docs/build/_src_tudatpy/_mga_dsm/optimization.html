

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MGA-DSM Optimization &mdash; CDL-docs 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="../../_static/contentui.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MGA-DSM Analysis" href="analysis.html" />
    <link rel="prev" title="MGA-DSM Inputs" href="inputs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> CDL-docs
          

          
            
            <img src="../../_static/cover.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../_src_cdp4/manual.html">CDP4 Manual</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../tudatpy.html">Tudat(Py)</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../tudatpy.html#mga-dsm-transfers">MGA-DSM transfers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="general.html">MGA-DSM general information</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputs.html">MGA-DSM Inputs</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">MGA-DSM Optimization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-script">The script</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tips-tricks-to-help-the-optimization">Tips &amp; Tricks to help the optimization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="analysis.html">MGA-DSM Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="save_to_excel.html">MGA-DSM save results to Excel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tudatpy.html#orbital-phase">Orbital phase</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../_src_downloads/downloads.html">Downloads for the Collaborative Design Lab</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CDL-docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../tudatpy.html">Tudat(Py)</a> &raquo;</li>
        
      <li>MGA-DSM Optimization</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/_src_tudatpy/_mga_dsm/optimization.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mga-dsm-optimization">
<span id="id1"></span><h1>MGA-DSM Optimization<a class="headerlink" href="#mga-dsm-optimization" title="Permalink to this headline">¶</a></h1>
<p>In the following section the optimization of MGA-DSM trajectories is explained. If you are unfamiliar with optimizations
within Tudat(py) and/or <a class="reference external" href="https://esa.github.io/pygmo2/index.html">PyGMO</a>, please refer to <a class="reference external" href="https://tudat-space.readthedocs.io/en/latest/_src_resources/pygmo_basics.html">Using Tudat(Py) with PyGMO</a> first.</p>
<div class="section" id="the-script">
<h2>The script<a class="headerlink" href="#the-script" title="Permalink to this headline">¶</a></h2>
<p>The optimizer will search for optimal solutions in terms of two objectives: <span class="math notranslate nohighlight">\(\Delta V\)</span> and time of flight. The <a class="reference external" href="https://en.wikipedia.org/wiki/Pareto_front">Pareto
fronts</a> that result from the optimization are always saved and can be plotted in order to identify specific solutions that
are to be analyzed further, in terms of available communication time, incident solar flux and other quantities.</p>
<p>The optimization can be performed, with the settings as defined in the input file, without any further modifications or other
settings to be defined, with <code class="docutils literal notranslate"><span class="pre">transfer_trajectory/transfer_trajectory_optimization.py</span></code>. This script imports the required
packages, modules, functions and variables and performs the optimization. A user defined problem (UDP) class is defined in
<code class="docutils literal notranslate"><span class="pre">src/TransferTrajectoryOptimizer.py</span></code> as required by PyGMO. This class contains an additional function that runs the
actual optimization. The Non-dominated Sorting Genetic Algorithm 2 (NSGA2) has been implemented with default settings.
This algorithm was chosen based on its performance in multiple case studies, where it outperformed the other Multi-Objective
optimizers available in PyGMO.</p>
<p>During the optimization, the parameters and fitness values of every 100th generation are saved to text files, which can
be used for reference later on, for example to check convergence of the optimization. Afterwards, the Pareto front is
obtained from the final generation, plotted and optionally saved in PDF format. The corresponding parameters and fitness
values are also saved to text files. If multiple planet sequences are given in <code class="docutils literal notranslate"><span class="pre">transfer_body_orders</span></code>, the next planet
sequence is optimized subsequently. Otherwise, the script terminates and the Pareto front(s)
can be analyzed in order to choose solutions that are interesting for further analysis.</p>
<p>Creating the UDP and performing the optimization are done with the code snippet below. This also illustrates that the
departure and arrival orbit characteristics and seed are optional inputs, as explained in <a class="reference internal" href="inputs.html#mga-dsm-inputs"><span class="std std-ref">MGA-DSM Inputs</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">src.TransferTrajectoryOptimizer</span> <span class="kn">import</span> <span class="n">TransferTrajectoryOptimizer</span>

<span class="n">optimizer</span> <span class="o">=</span> <span class="n">TransferTrajectoryOptimizer</span><span class="p">(</span><span class="n">number_of_evolutions</span><span class="p">,</span>
                                        <span class="n">population_size</span><span class="p">,</span>
                                        <span class="n">departure_date</span><span class="p">,</span>
                                        <span class="n">departure_date_margin</span><span class="p">,</span>
                                        <span class="n">maximum_delta_v</span><span class="p">,</span>
                                        <span class="n">leg_type</span><span class="p">,</span>
                                        <span class="n">transfer_body_order</span><span class="p">,</span>
                                        <span class="n">departure_semi_major_axis</span><span class="o">=</span><span class="n">departure_semi_major_axis</span><span class="p">,</span>
                                        <span class="n">departure_eccentricity</span><span class="o">=</span><span class="n">departure_eccentricity</span><span class="p">,</span>
                                        <span class="n">arrival_semi_major_axis</span><span class="o">=</span><span class="n">arrival_semi_major_axis</span><span class="p">,</span>
                                        <span class="n">arrival_eccentricity</span><span class="o">=</span><span class="n">arrival_eccentricity</span><span class="p">,</span>
                                        <span class="n">seed</span><span class="o">=</span><span class="n">optimization_seed</span><span class="p">)</span>

<span class="n">pareto_fitness</span><span class="p">,</span> <span class="n">results_directory</span> <span class="o">=</span> <span class="n">optimizer</span><span class="o">.</span><span class="n">perform_optimization</span><span class="p">(</span><span class="n">curren_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="tips-tricks-to-help-the-optimization">
<h2>Tips &amp; Tricks to help the optimization<a class="headerlink" href="#tips-tricks-to-help-the-optimization" title="Permalink to this headline">¶</a></h2>
<p>It may occur that the optimization does not yield expected, or even satisfactory, results. This may be because the problem
definition is not ideal, but it may also be that the optimal solutions are simply not found. In the latter case there are a
few things that can be done to ‘manipulate’ or ‘tweak’ the optimization:</p>
<ul class="simple">
<li><dl class="simple">
<dt><em>Pick a different</em>  <code class="docutils literal notranslate"><span class="pre">optimization_seed</span></code></dt><dd><p>The seed is used for two purposes: to create the initial population and to initialize the optimization algorithm. By
specifying a different seed, the starting point for the optimization is different and the final results may be better.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>Set</em> <code class="docutils literal notranslate"><span class="pre">maximum_delta_v</span></code></dt><dd><p>It is possible to try and force the optimization towards solutions with lower <span class="math notranslate nohighlight">\(\Delta V\)</span>. This can be done by specifying
a maximum <span class="math notranslate nohighlight">\(\Delta V\)</span>. This value is used in the optimization to apply a penalty to all solutions that exceed it,
thereby forcing it to continue to search for better solutions. There is a risk involved here, if this maximum
<span class="math notranslate nohighlight">\(\Delta V\)</span> is too low, the optimization may not find any solutions satisfying it at all and won’t give you any
solutions that are not penalized. The default is set to <span class="math notranslate nohighlight">\(2e8\)</span> m/s, so that it is practically ineffective.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>Increase</em> <code class="docutils literal notranslate"><span class="pre">population_size</span></code></dt><dd><p>Increasing the population size (even only slightly) will yield a different initial population, thereby affecting
the entire evolution and may therefore yield better solutions (maybe even in less evolutions).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>Reduce number of parameters</em></dt><dd><p>It may be the case that a problem <em>with</em> DSMs is simply too complex to be optimized efficiently. In that case it may
be better to reduce the number of parameters, either by not using DSMs or by reducing the number of planets that are
visited.</p>
</dd>
</dl>
</li>
</ul>
<p>Lastly, during the analysis of a few case studies, it was noted that the time of flight range in the Pareto front is
rather limited in some cases. In this case it may be that the optimization has found optimal solutions for this range,
but that these are not acceptable and that larger times of flight need to be explored. This may be achieved with the
above tricks (e.g. it is advised to try setting a maximum <span class="math notranslate nohighlight">\(\Delta V\)</span> first), but there is one more trick:</p>
<ul class="simple">
<li><dl class="simple">
<dt><em>Increase values in</em> <code class="docutils literal notranslate"><span class="pre">MINIMUM_TIME_OF_FLIGHT_DICT</span></code> <em>and</em> <code class="docutils literal notranslate"><span class="pre">MAXIMUM_TIME_OF_FLIGHT_DICT</span></code> <em>in</em> <code class="docutils literal notranslate"><span class="pre">transfer_trajectory/transfer_trajectory_inputs.py</span></code></dt><dd><p>In this file the boundaries as used in the optimization, regarding time of flight, are defined, depending on the planet
that defines the end of a leg. One can increase the minima (and possibly increase the maxima) to move (and extend) the
time of flight range of the Pareto front.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="analysis.html" class="btn btn-neutral float-right" title="MGA-DSM Analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="inputs.html" class="btn btn-neutral float-left" title="MGA-DSM Inputs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Concurrent Design Lab AE

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>